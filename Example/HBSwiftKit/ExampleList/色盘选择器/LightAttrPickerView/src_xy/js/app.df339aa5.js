(function(t){function o(o){for(var e,a,c=o[0],s=o[1],u=o[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e]);h&&h(o);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,o=0;o<i.length;o++){for(var n=i[o],e=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(e=!1)}e&&(i.splice(o--,1),t=a(a.s=n[0]))}return t}var e={},r={app:0},i=[];function a(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,o,n){a.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,o){if(1&o&&(t=a(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var e in t)a.d(n,e,function(o){return t[o]}.bind(null,e));return n},a.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(o,"a",o),o},a.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=o,c=c.slice();for(var u=0;u<c.length;u++)o(c[u]);var h=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,o,n){t.exports=n("cd49")},"355a":function(t,o,n){"use strict";n("cf55")},6073:function(t,o,n){t.exports=n.p+"img/color_panel.860bf49a.png"},"64d3":function(t,o,n){"use strict";n("a294")},a294:function(t,o,n){},cd49:function(t,o,n){"use strict";n.r(o);n("e260"),n("e6cf"),n("cca6"),n("a79d");var e=n("7a23");function r(t,o,n,r,i,a){var c=Object(e["j"])("ColorPicker");return Object(e["f"])(),Object(e["b"])(c,{onOnColorChange:r.onColorChange,xyColor:i.xyColor,ref:"pickerNode"},null,8,["onOnColorChange","xyColor"])}n("99af");var i=n("6073"),a=n.n(i),c=function(t){return Object(e["h"])("data-v-28f2a956"),t=t(),Object(e["g"])(),t},s={class:"cd-color-picker-wrap",ref:"cdColorPickerWrap"},u=c((function(){return Object(e["d"])("img",{src:a.a,alt:""},null,-1)}));function h(t,o,n,r,i,a){return Object(e["f"])(),Object(e["c"])("div",s,[Object(e["d"])("div",{class:"cd-color-picker",ref:"cdColorPicker",onTouchstart:o[0]||(o[0]=Object(e["k"])((function(){return a.onTouchStart&&a.onTouchStart.apply(a,arguments)}),["stop"])),onTouchmove:o[1]||(o[1]=Object(e["k"])((function(){return a.onTouchMove&&a.onTouchMove.apply(a,arguments)}),["stop"])),onTouchend:o[2]||(o[2]=Object(e["k"])((function(){return a.onTouchEnd&&a.onTouchEnd.apply(a,arguments)}),["stop"]))},[u,Object(e["d"])("div",{class:"indicator",ref:"indicator",style:Object(e["e"])({left:i.indicatorPosition.x+"px",top:i.indicatorPosition.y+"px",background:"rgb(".concat(0|i.curColor[0],",").concat(0|i.curColor[1],",").concat(0|i.curColor[2],")")})},null,4)],544)],512)}var l=n("2909"),d=(n("d81d"),n("ac1f"),n("5319"),n("1276"),function(t){if(!t||"string"!==typeof t||7!==t.length)return t;t=t.replace("#","0x");var o=(16711680&t)>>16,n=(65280&t)>>8,e=255&t;return[o,n,e]}),f=function(t){if(!t)return t;var o={},n=/([^?&=]+)=([^?&=]+)/g;return t.replace(n,(function(t,n,e){return null!==n&&void 0!==n&&(o[n]=e.split("#/").shift())})),o},p=function(t,o,n){var e=.49*t+.31*o+.2*n,r=.17697*t+.8124*o+.01063*n,i=0*t+.01*o+.99*n;return{x:e,y:r,z:i}},v=function(t,o,n){var e=t/(t+o+n),r=o/(t+o+n);return Math.round(65536*e)+" "+Math.round(65536*r)},g=function(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92},y=function(t,o,n){var e=p(g(t),g(o),g(n));return v(e.x,e.y,e.z)},_={name:"color-picker",props:{xyColor:{type:String,default:""}},data:function(){return{initColors:["#FF0000","#FF8000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF"],indicatorPosition:{x:0,y:0},centerPosition:{x:0,y:0},colorParams:{idx:0,radius:0,colors:[]},curColor:"",curXY:"",xyColors:{},panelRadius:0}},methods:{onTouchStart:function(t){this._getRect(),this.onTouchMove(t),this.$emit("onFingerTouch",!0)},onTouchMove:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY},e=this.angle(this.centerPosition,n);e=Math.floor(e);var r=this.pickerRect.width/2,i=Math.sqrt(Math.pow(Math.abs(this.centerPosition.x-n.x),2)+Math.pow(Math.abs(this.centerPosition.y-n.y),2));if(i>r){var a=n.x-this.centerPosition.x,c=n.y-this.centerPosition.y,s=Math.sqrt(Math.pow(Math.abs(a),2)+Math.pow(Math.abs(c),2)),u=a*(this.pickerRect.width/2)/s+this.pickerRect.width/2,h=c*(this.pickerRect.height/2)/s+this.pickerRect.height/2;n.x=u+this.pickerRect.left,n.y=h+this.pickerRect.top,i=r}this.indicatorPosition={x:n.x-this.indicatorRect.width/2-this.wrapRect.left,y:n.y-this.indicatorRect.height/2-this.wrapRect.top};var d=r/50,f=50-Math.ceil(i/d);this.colorParams.idx=f,this.colorParams.angle=e,this.curColor=window.colorParams[e][f],this.curXY=y.apply(void 0,Object(l["a"])(this.curColor)),this._emitChange(o)},onTouchEnd:function(t){this.onTouchMove(t,!0),this.$emit("onFingerTouch",!1)},angle:function(t,o){var n=o.x-t.x,e=o.y-t.y,r=360*Math.atan(e/n)/(2*Math.PI);return n>0?r=r>0?r:360+r:n<0&&(r=180+r),r},_getRect:function(){this.wrapRect=this.$refs.cdColorPickerWrap.getBoundingClientRect(),this.pickerRect=this.$refs.cdColorPicker.getBoundingClientRect(),this.indicatorRect=this.$refs.indicator.getBoundingClientRect(),this.centerPosition={x:this.pickerRect.left+this.pickerRect.width/2,y:this.pickerRect.top+this.pickerRect.height/2}},_initColors:function(){var t=[];this.initColors.map((function(o){return t.push(d(o))}));for(var o=[],n=0;n<7;n++)for(var e=6===n?48:52,r=0===n||1===n||4===n?1:2===n||5===n?0:2,i=0;i<e;i++)if(6===n)o.push([t[n][0],t[n][1],t[n][2]-t[n][2]/e*i]);else{var a=[t[n][0],t[n][1],t[n][2]];a[r]=t[n][r]+(t[n+1][r]-t[n][r])/e*i,o.push(a)}for(var c=[255,255,255],s=[],u={},h=0,l=o.length;h<l;h++){var f=o[h][0]===c[0]?0:(c[0]-o[h][0])/50,p=o[h][1]===c[1]?0:(c[1]-o[h][1])/50,v=o[h][2]===c[2]?0:(c[2]-o[h][2])/50;s[h]=[o[h]];var g=y(o[h][0],o[h][1],o[h][2]);u[g]={c:o[h],a:h,i:0};for(var _=49;_>0;_--){var C=[c[0]-f*_,c[1]-p*_,c[2]-v*_],T=y(C[0],C[1],C[2]);u[T]={c:C,a:h,i:50-_},s[h].push(C)}}window.colorParams=s,window.xyColors=u},_initIndicatorPosition:function(t,o){var n=this;t&&(window.colorParams&&window.colorParams.length||this._initColors(),this.$nextTick((function(){var e=window.xyColors[t];e||(e=window.xyColors["22056 22256"]);var r=e.a+90,i=Math.sin(r*Math.PI/180)*(n.pickerRect.width/2)*((50-e.i)/50),a=Math.cos(r*Math.PI/180)*(n.pickerRect.height/2)*((50-e.i)/50);n.curColor=e.c,n.indicatorPosition.x=n.centerPosition.x-n.wrapRect.left-n.indicatorRect.width/2+i,n.indicatorPosition.y=n.centerPosition.y-n.wrapRect.top-n.indicatorRect.height/2-a,!o&&n._emitChange(!1,t)})))},_emitChange:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;this.$emit("onColorChange",{color:this.curColor,curXY:o||this.curXY,isTouchEnd:t})}},created:function(){this._initColors()},mounted:function(){this._getRect(),this.xyColor?this._initIndicatorPosition(this.xyColor,!0):this._initIndicatorPosition("22056 22256",!0)}},C=(n("64d3"),n("6b0d")),T=n.n(C);const O=T()(_,[["render",h],["__scopeId","data-v-28f2a956"]]);var m=O,b=(n("a9e3"),{created:function(){var t=window,o=f(window.location.href);if(o){if(o.token&&(t.__WINGTO__.token=o.token),o.platform&&(t.__WINGTO__.platform=o.platform.indexOf("android")>=0?"android":o.platform.indexOf("ios")>=0?"ios":""),o.appVersion){var n=o.appVersion.split(".");if(Array.isArray(n)){var e=Number(1e4*Number(n[0]))+Number(100*Number(n[1]))+Number(n[2]);t.__WINGTO__.appVersion=e}}t.__WINGTO__.statusbarheight=Number(o.statusbarheight)||0}},mounted:function(){this.notifyNativeReady&&this.notifyNativeReady()}}),w=(n("e9c4"),n("caad"),{install:function(t){var o=window;o.__WINGTO__||(o.__WINGTO__={noticeJsReadyStatus:!1});var n=t.config.globalProperties;n.notifyNativeReady=function(){var t=setTimeout((function(){"ios"===o.__WINGTO__.platform?(o.webkit.messageHandlers.WINGTO_NATIVE.postMessage(JSON.stringify({method:"onJsReady",data:""})),o.__WINGTO__.noticeJsReadyStatus=!0):"android"===o.__WINGTO__.platform&&o.WINGTO_NATIVE&&o.WINGTO_NATIVE.onJsReady&&(o.WINGTO_NATIVE.onJsReady(),o.__WINGTO__.noticeJsReadyStatus=!0),t&&clearTimeout(t)}),50)},n.getCacheData=function(t){},n.mqttMessage=function(t){},n.dataSaveResult=function(t){},n.onSetHsvColor=function(t){},n.onPageChange=function(t){},n.onH5DataChannel=function(t){},n.onDataRefresh=function(t){},n.onSetTempColor=function(t){},n.onSetXyColor=function(t){},o.WINGTO_H5||(o.WINGTO_H5={getCacheData:n.getCacheData,mqttMessage:n.mqttMessage,dataSaveResult:n.dataSaveResult,onDataRefresh:n.onDataRefresh,onPageChange:n.onPageChange,onH5DataChannel:n.onH5DataChannel,onSetHsvColor:n.onSetHsvColor,onSetTempColor:n.onSetTempColor,onSetXyColor:n.onSetXyColor}),o.WINGTO_NATIVE||(o.WINGTO_NATIVE={})}}),N=["dataSave","deviceHadModify","onJsReady","onNavigateTo","onVibrate","onAuthModify","onDataChannel","onHsvColorPicker","sendMsgToWechat","sendMsgToSMS","onTempColorPicker","onXyColorPicker"],P=function(t,o){console.log(">>> 执行native:",t,JSON.stringify(o),"<<<");var n=window;t?N.includes(t)?"ios"===n.__WINGTO__.platform?(n.webkit.messageHandlers.WINGTO_NATIVE.postMessage(JSON.stringify({method:t,data:o})),console.log("onHsvColorPicker2:",JSON.stringify({method:t,data:o}))):"android"===n.__WINGTO__.platform&&n.WINGTO_NATIVE&&n.WINGTO_NATIVE[t]&&n.WINGTO_NATIVE[t](JSON.stringify(o)):console.error("native funcList do not contain method: ".concat(t)):console.error("function name is required")},R={mixins:[b],data:function(){return{xyColor:"22056 22256"}},setup:function(){var t=function(t){var o={curXY:t.curXY,isTouchEnd:!!t.isTouchEnd};o.rgba=[0|t.color[0],0|t.color[1],0|t.color[2],1],P("onXyColorPicker",o)},o=Object(e["i"])();return{pickerNode:o,onColorChange:t}},methods:{setColor:function(t){this.xyColor=t.curXY,this.pickerNode._initIndicatorPosition(t.curXY,!1)}},components:{ColorPicker:m},mounted:function(){var t=this;window.WINGTO_H5.onSetXyColor=function(o){if(o)try{var n=JSON.parse(o);n&&t.setColor(n)}catch(e){console.error(e)}}}};n("355a");const x=T()(R,[["render",r]]);var k=x,I=(n("e382"),Object(e["a"])(k));I.use(w),I.mount("#app")},cf55:function(t,o,n){},e382:function(t,o,n){}});
//# sourceMappingURL=app.df339aa5.js.map